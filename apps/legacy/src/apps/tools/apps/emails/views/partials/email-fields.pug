- email = email || {}
- systemEmails = systemEmails || []
- segmentEmails = segmentEmails || []

mixin contactFields
  tr
    td *|EMAIL|*
    td Contact email address
  tr
    td *|NAME|*
    td Contact full name
  tr
    td *|FNAME|*
    td Contact first name
  tr
    td *|LNAME|*
    td Contact last name

.form-group
  label(for='fromEmail').control-label.col-md-3 From email
  .col-md-6
    input(type='text' name='fromEmail' value=email.fromEmail)#fromEmail.form-control
.form-group
  label(for='fromName').control-label.col-md-3 From name
  .col-md-6
    input(type='text' name='fromName' value=email.fromName)#fromName.form-control
.form-group
  label(for='subject').control-label.col-md-3 Subject
  .col-md-6
    input(type='text' name='subject' required value=email.subject)#subject.form-control
.form-group
  label(for='body').control-label.col-md-3 Body
  .col-md-9
    textarea(name='body' required rows="10")#body.form-control.js-rte-textarea= email.body
.row
  .col-md-offset-3.col-md-9
    p: button(type='button' data-toggle="toggle" data-target="mergeTags").btn.btn-default.btn-xs Show merge tags
    table(style='display: none')#mergeTags.table.table-condensed
      thead
        tr
          th Tag
          th Description
      tbody
        if segmentEmails.length > 0
          tr(class='active')
            td(colspan='2')
              small Merge tags for segment emails
          +contactFields

        for email in systemEmails
          if assignableSystemEmails[email]
            tr(class='active')
              td(colspan='2')
                small Merge tags for the #{assignableSystemEmails[email].name} email
            if assignableSystemEmails[email].showContactFields
              +contactFields
            for field in assignableSystemEmails[email].mergeFields
              tr
                td *|#{field[0]}|*
                td= field[1]
        tr(class='active')
          td(colspan='2')
            small Magic links for email addresses that match a contact
        tr
          td *|RPLINK|*
          td A reset password link
        tr
          td *|LOGINLINK|*
          td A login link
        tr
          td *|SPLINK|*
          td A set password link
