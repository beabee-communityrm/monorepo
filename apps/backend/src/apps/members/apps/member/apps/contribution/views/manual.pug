extends /views/notrack.pug

block prepend title
	- title = 'Manual contribution'
	- page = 'contribution'

block contents
	.row
		.col-md-3
			include /apps/members/apps/member/views/partials/sidebar.pug
		.col-md-9
			+page_header( member.fullname )

			h4 Update contribution

			form( method="post").form-horizontal
				+csrf
				input( type='hidden' name='action' value='update-manual-subscription')

				.js-reveal
					.form-group
						label.col-md-3.control-label Contribution type
						.col-md-6
							select(name='method' required).js-reveal-types.form-control
								option(value='' disabled selected) Select one
								each t in ['none', 'manual']
									option(selected=contribution.method === t)= t


					.js-reveal-type(data-type='manual')
						+input( 'number', 'Amount', 'amount', {
							left: 3, right: 4, before: currencySymbol,
							value: contribution.amount
						})
						+input( 'radio', 'Period', 'period', {
							left: 3, right: 4,
							options: {'monthly': 'Monthly', 'annually': 'Annually'},
							value: contribution.period
						})

						.form-group
							label(for='source').control-label.col-md-3 Source
							.col-md-6
								select(name='source')#source.form-control
									option
									each source in Options.list('available-manual-payment-sources')
										option(selected=contribution.source === source)= source

						+input( 'text', 'Reference', 'reference', {
							left: 3, right: 6,
							value: contribution.reference
						})

				+form_button( 'Update', 'success', { left: 3 } )
